<div class="min-h-screen bg-gray-50">
  <nav class="navbar-container">
    <div class="navbar-content">
      <div class="navbar-wrapper">
        <div class="navbar-brand">
          <img src="/assets/logoFitBerry.jpeg" alt="FitBerry Logo" class="brand-logo">
          <span class="brand-text">FitBerry</span>
        </div>

        <div class="navbar-menu">
          <button (click)="goBack()" class="nav-button">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
            </svg>
            <span>Back to Plans</span>
          </button>

          <div class="navbar-user-section">
            <div class="user-info">
              <div class="user-avatar">
                <span>{{ getUserInitials() }}</span>
              </div>
              <span class="user-email">{{ userEmail }}</span>
            </div>

            <button (click)="logout()" class="logout-button">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
              </svg>
              <span>Logout</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <div class="loading-container" *ngIf="isLoading">
    <div class="spinner-large"></div>
    <p>Loading nutrition plan...</p>
  </div>

  <div class="error-message" *ngIf="error && !isLoading">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
    </svg>
    <span>{{ error }}</span>
  </div>

  <div class="plan-detail-container" *ngIf="plan && !isLoading">
    <div class="plan-header">
      <div>
        <h1 class="plan-title">{{ plan.titre }}</h1>
        <p class="plan-date">Generated on {{ formatDate(plan.createdAt) }}</p>
      </div>
      <button (click)="downloadPDF()" class="download-pdf-button">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
        </svg>
        <span>Download PDF</span>
      </button>
    </div>

    <div class="plan-content">
      <div class="description-section">
        <h2 class="section-title">Plan Overview</h2>
        <p class="section-text">{{ plan.description }}</p>
      </div>

      <div class="macros-section">
        <h2 class="section-title">Daily Nutritional Targets</h2>
        <div class="macros-grid">
          <div class="macro-card calories-card">
            <div class="macro-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"/>
              </svg>
            </div>
            <div class="macro-info">
              <span class="macro-label">Calories</span>
              <span class="macro-value">{{ plan.calories }} kcal</span>
            </div>
          </div>

          <div class="macro-card proteins-card">
            <div class="macro-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
              </svg>
            </div>
            <div class="macro-info">
              <span class="macro-label">Proteins</span>
              <span class="macro-value">{{ plan.proteins }}g</span>
            </div>
          </div>

          <div class="macro-card carbs-card">
            <div class="macro-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"/>
              </svg>
            </div>
            <div class="macro-info">
              <span class="macro-label">Carbohydrates</span>
              <span class="macro-value">{{ plan.carbs }}g</span>
            </div>
          </div>

          <div class="macro-card fats-card">
            <div class="macro-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/>
              </svg>
            </div>
            <div class="macro-info">
              <span class="macro-label">Fats</span>
              <span class="macro-value">{{ plan.fats }}g</span>
            </div>
          </div>
        </div>
      </div>

      <div class="recommendations-section">
        <h2 class="section-title">Detailed Recommendations</h2>
        <div class="recommendations-content">
          <pre class="recommendations-text">{{ plan.recommendations }}</pre>
        </div>
      </div>
    </div>
  </div>
</div>
